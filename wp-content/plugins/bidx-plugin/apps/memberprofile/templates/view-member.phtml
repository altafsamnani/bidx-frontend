<?php

$personalDetails = $this->exst ($this->data->bidxMemberProfile->personalDetails);
$firstName = $this->exst ($personalDetails->firstName);
$lastName = $this->exst ($personalDetails->lastName);

$useDataSrc = false;
$picSrc = $this->exst ($personalDetails->profilePicture->document);

if (!$personalDetails->profilePicture->document) {
    $picSrc = 'holder.js/100x100/industrial/auto/text:No Image';
    $useDataSrc = true;
}

$entrepreneurDetails = $this->exst ($this->data->bidxEntrepreneurProfile);

?>

<div class="well profile-block">

    <div class="btn-group controls">
        <?php if ($this->exst ($personalDetails->bidxCanEdit)) { ?>
            <a class="btn btn-primary" href="#editMember/<?php echo $personalDetails->ownerId; ?>">Edit</a>
        <?php } ?>
    </div>


    <div class="row-fluid">
        <div class="span3">
            <h4>Member</h4>
            <img height="175px" width="150px" <?php $useDataSrc ? "data-" : "" ?>src="<?php echo $picSrc ?>" class="img-rounded">

        </div>
        <div class="span9"><br/>
            <div class="row-fluid">
                <div class="span12"><h4><?php echo ucwords($firstName . ' ' . $lastName); ?></h4></div>
                <!-- Personal details 6/6 Start -->

                <?php
//Language Details

                $languageData = $this->exst ($personalDetails->languageDetail);
                $languageDetails = ($languageData) ? $this->getMultiValues ($languageData, ', ', 'language', 'language'):NULL;
                $motherLanguageDetails = $this->getMultiValues ($languageData, ', ', 'language', 'language', array ('motherLanguage' => '1'));
//Address Details
                $address = '';
                if ($this->exst ($personalDetails->address[0])) {
                    $street = $this->exst ($personalDetails->address[0]->street,'');
                    $streetNumber = $this->exst ($personalDetails->address[0]->streetNumber,'');
                    $cityTown = $this->exst ($personalDetails->address[0]->cityTown,'');
                    $postalCode = $this->exst ($personalDetails->address[0]->postalCode,'');

                    $addressArr = array ($street . ' ' . $streetNumber,
                      $cityTown,
                      'country' => $personalDetails->address[0]->country,
                      $personalDetails->address[0]->postalCode);

                    $address = $this->createRowValue ($addressArr, ', ');
                }
//CV
                $cvDetails = ($this->exst($entrepreneurDetails->cv)) ? '<a href="' . $entrepreneurDetails->cv->document . '" target="_blank" > ' . $entrepreneurDetails->cv->documentName . '</a>' :
                $professionalTitle = $this->exst($personalDetails->professionalTitle);
                $gender = $this->exst($personalDetails->gender);
                $nationality = $this->exst($personalDetails->nationality);
                $dateofBirth = $this->exst($personalDetails->dateOfBirth);
                $highestEducation = $this->exst($personalDetails->highestEducation);

                $rowValues = array ($professionalTitle,
                'gender' => $gender,
                'nationality' => $nationality,
                date('j F Y', strtotime ($dateofBirth)),
                $highestEducation,
                'motherlanguage' => $motherLanguageDetails,
                'language' => $languageDetails,
                $address,
                $cvDetails);

                echo $this->addMultipleRows ('span12', $rowValues);
                ?>

                <br/>

                <?php
                $rowValues = array ('E-mail' => $this->exst ($personalDetails->emailAddress));
                echo $this->addRowsWithLabelAdjacent ('span3', 'span9', $rowValues, array ('class_label' => 'label label-info'));
                $rowValues = array ('Mobile' => $this->getMultiValues ($this->exst ($personalDetails->contactDetail), ', ', NULL, 'mobile'));
                echo $this->addRowsWithLabelAdjacent ('span3', 'span9', $rowValues, array ('class_label' => 'label label-info'));

                $rowValues = array ('Fax' => $this->getMultiValues ($this->exst ($personalDetails->contactDetail), ', ', NULL, 'fax'));
                echo $this->addRowsWithLabelAdjacent ('span3', 'span9', $rowValues, array ('class_label' => 'label label-info'));
                $rowValues = array ('Landline' => $this->getMultiValues ($this->exst ($personalDetails->contactDetail), ', ', NULL, 'landLine'));
                echo $this->addRowsWithLabelAdjacent ('span3', 'span9', $rowValues, array ('class_label' => 'label label-info'));
                ?>
                <br/>
                <?php
                $rowValues = array ('Facebook' => $this->addSocialPluginScript ('facebookprofile', $this->exst ($personalDetails->facebook)),
                  'Twitter' => $this->addSocialPluginScript ('twitterprofile', $this->exst ($personalDetails->twitter)),
                  'Linkedin' => $this->addSocialPluginScript ('linkedin', $this->exst ($personalDetails->linkedIn)),
                  'Skype' => $this->addSocialPluginScript ('skype', $this->exst ($personalDetails->skype))
                );

                echo $this->addAdjacentRows ('span1', $rowValues, array ('Skype' => 'skypeclass'));
                // echo $this->addRowsWithLabelAdjacent('span3', 'span3', $rowValues, array('class_label' => 'label label-info'));
                ?>

                <?php
//$rowValues = array('Facebook' => $this->addSocialPluginScript('facebook', $personalDetails->facebook),
//                   'Twitter' => $this->addSocialPluginScript('twitter', $personalDetails->twitter));
//echo $this->addRowsWithLabelAdjacent('span3', 'span3', $rowValues, array('class_label' => 'label label-info'));
//echo $this->addAdjacentRows('span6', $rowValues);
                ?>

            </div>
        </div>
    </div>

    <?php
// Attachments
//
    echo $this->displayAttachments ($header = '<h4>Documents<h4>', $this->exst ($personalDetails->attachment));
    ?>

</div>
