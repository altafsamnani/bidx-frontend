<?php

$useDataSrc = false;
$picSrc     = $this->company->logo->document;

if (!$picSrc) {
    $picSrc     = 'holder.js/100x100/industrial/auto/text:No Image';
    $useDataSrc = true;
}

?>
<div class="well profile-block">

    <div class="btn-group controls">
    <?php if ($this->company->bidxCanEdit) { ?>
        <a class="btn btn-primary" href="#editCompany/<?php echo $this->company->ownerId; ?>">Edit</a>
    <?php } ?>
    </div>

    <h4>Company details</h4>

    <div class="row-fluid">
        <div class="span8">

<?php
    $options = array( 'class_label' => 'bidx-label' );

    echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
        array( 'Company name' => $this->company->name ), $options );

    echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
        array( 'Company website' => $this->company->website ), $options );

    if ( $this->company->registered ) {

        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Date of registration' =>   date("d-m-Y", strtotime( $this->company->dateCompanyEstab ))), $options );
        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Legal form of business' => $this->company->legalFormBusiness ), $options );

        $statutoryAddress = $this->company->statutoryAddress;

        $arStatutoryAddress = array();

        if ( $statutoryAddress->street )
        {
            $arStatutoryAddress[] = $statutoryAddress->street;
        }

        if ( $statutoryAddress->streetNumber )
        {
            $arStatutoryAddress[] = $statutoryAddress->streetNumber;
        }

        if ( $statutoryAddress->postalCode )
        {
            $arStatutoryAddress[] = $statutoryAddress->postalCode;
        }

        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Statutory address' => implode( ' ', $arStatutoryAddress )), $options );

        $arStatutoryCityCountry = array();

        if ( $statutoryAddress->cityTown )
        {
            $arStatutoryCityCountry[] = $statutoryAddress->cityTown;
        }

        if ( $statutoryAddress->country )
        {
            $arStatutoryCityCountry[] = $statutoryAddress->country;
        }

        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Statutory city, country' => implode( ' ', $arStatutoryCityCountry )), $options );

        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Fiscal number' => $this->company->fiscalNumber ), $options );
        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Company registration number' => $this->company->registrationNumber ), $options );
    }

    if ( $this->company->numPermFemaleEmpl || $this->company->numPermMaleEmpl || $this->company->numTempFemaleEmpl || $this->company->numTempMaleEmpl ) {
        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Number of permanent female employees' => $this->company->numPermFemaleEmpl ), $options );
        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Number of permanent male employees' => $this->company->numPermMaleEmpl ), $options );
        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Number of temporary female employees' => $this->company->numTempFemaleEmpl ), $options );
        echo $this->addRowsWithLabelAdjacent( 'span6', 'span6',
            array( 'Number of temporary male employees' => $this->company->numTempMaleEmpl ), $options );
    }
?>
        </div>

        <div class="span4">
            <img <?php $useDataSrc ? "data-" : "" ?>src="<?php echo $picSrc ?>" class="img-rounded">
        </div>
    </div><!-- row -->
</div><!-- well -->
