<?php
    $useDataSrc = false;
    $picSrc     = $this->exst($this->company->logo->document);

    if (!$picSrc) {
        $picSrc     = 'holder.js/100x100/industrial/auto/text:No Image';
        $useDataSrc = true;
    }
?>
<div class="panel-heading">
    <h3 class="panel-title"><?php _e('Company details','bidxplugin'); ?></h3>
</div>
<div class="panel-body">
<img <?php echo $useDataSrc ? "data-" : "" ?>src="<?php echo $picSrc ?>" class="img-rounded">
<?php

    $rowValues = array(
        __('Company name','bidxplugin') => $this->exst($this->company->name ),
        __('Company website','bidxplugin') => sprintf( '<a href="%1$s" target="_blank">%1$s</a>', $this->exst($this->company->website ))
    );
    echo $this->pairRows( $rowValues );

    if (!empty($this->company->registered)) {

        $statutoryAddress = $this->exst($this->company->statutoryAddress);

        $arStatutoryAddress = array();
        if ($this->exst($statutoryAddress->street))         { $arStatutoryAddress[] = $statutoryAddress->street; }
        if ($this->exst($statutoryAddress->streetNumber))   { $arStatutoryAddress[] = $statutoryAddress->streetNumber; }
        if ($this->exst($statutoryAddress->postalCode))     { $arStatutoryAddress[] = $statutoryAddress->postalCode; }

        $arStatutoryCityCountry = array();
        if ($this->exst($statutoryAddress->cityTown))       { $arStatutoryCityCountry[] = $statutoryAddress->cityTown; }
        if ($this->exst($statutoryAddress->country))        { $arStatutoryCityCountry[] = $statutoryAddress->country; }

        $rowValues = array(
            __('Date of registration','bidxplugin') =>  date( 'j F Y', strtotime( $this->company->dateCompanyEstab )),
            __('Legal form of business','bidxplugin') => $this->exst($this->company->legalFormBusiness),
            __('Statutory address','bidxplugin') => implode( ' ', $arStatutoryAddress ),
            __('Statutory city, country','bidxplugin') => implode( ' ', $arStatutoryCityCountry ),
            __('Fiscal number','bidxplugin') => $this->exst($this->company->fiscalNumber),
            __('Company registration number','bidxplugin') => $this->exst($this->company->registrationNumber)
        );
        echo $this->pairRows( $rowValues );
    }

    if ( $this->exst($this->company->numPermFemaleEmpl) ||
         $this->exst($this->company->numPermMaleEmpl) ||
         $this->exst($this->company->numTempFemaleEmpl) ||
         $this->exst($this->company->numTempMaleEmpl))
    {
        $rowValues = array(
            __('Number of permanent female employees','bidxplugin') => $this->exst($this->company->numPermFemaleEmpl),
            __('Number of permanent male employees','bidxplugin') => $this->exst($this->company->numPermMaleEmpl),
            __('Number of temporary female employees','bidxplugin') => $this->exst($this->company->numTempFemaleEmpl),
            __('Number of temporary male employees','bidxplugin') => $this->exst($this->company->numTempMaleEmpl)
        );
        echo $this->pairRows( $rowValues );
    }
?>
</div>
