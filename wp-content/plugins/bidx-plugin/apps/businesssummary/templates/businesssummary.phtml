<?php

$businessSummary    = $this->data;
$progress           = trim ($businessSummary->rating->Completeness) . '%';

$businessSummaryBidxMeta = isset($businessSummary->bidxMeta)
    ? $businessSummary->bidxMeta
    : null;

$canEdit        = $this->exst($businessSummaryBidxMeta->bidxCanEdit, false);
$entityStatus   = $this->exst($businessSummaryBidxMeta->bidxEntityStatus, '');

// To display Company Tab
//
$companyId = $this->exst ($businessSummary->company);

// Default set of rowproperties
//
$viewRowProperties = array ('tag_label' => 'div', 'class_label' => 'bidx-label', 'class_value' => 'bidx-value', 'class_row' => '' );

?>
<div class="businessSummary" id="businessSummary">

    <div class="pageHeader container">
        <div class="row-fluid">
            <div class="span4">
                <h1>Business plan</h1>
                <p><?php echo $this->exst( $businessSummary->slogan ); ?></p>
            </div>

            <div class="span4 completion">
                <h2>Business completion</h2>
                <div class="progress">
                    <div style="width:<?php echo $progress ?>" class="bar"><?php echo $progress ?> completed</div>
                </div>
            </div>

            <div class="span4 editControlsContainer">
                <div class="editControls btn-group">

                    <!-- SHOW -->
                    <div class="view viewShow">

<?php
    if ( $canEdit ) {
?>
                        <a class="btn btn-primary" href="#editBusinessSummary/<?php echo $businessSummaryBidxMeta->bidxEntityId; ?>"><?php _e( 'Edit', 'bidxplugin' ); ?></a>
<?php
        if ( $entityStatus == 'DRAFT' ) {
?>
                        <a class="btn" href="#publish"><?php _e( 'Publish', 'bidxplugin' ); ?></a>
<?php
        }
    }
?>
                    </div>

                    <!-- EDIT -->
                    <div class="view viewEdit"></div>

                </div>
            </div>

        </div>
    </div><!-- /pageHeader -->


    <div class="container">
        <div class="accordion" id="businessSummaryAccordion">

            <!-- General Overview -->
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#businessSummaryAccordion" href="#businessSummaryAccordion-GeneralOverview"><?php _e('General overview','bidxplugin'); ?></a>
                </div>
                <div id="businessSummaryAccordion-GeneralOverview" class="accordion-body collapse in">
                    <div class="accordion-inner">

                        <!-- SHOW -->
                        <div class="view viewShow">
<?php
                $rowValues = array (
                    __('Business name','bidxplugin')
                        => $this->exst($businessSummary->name),

                    __('Describe your business in 15 words','bidxplugin')
                        => $this->exst($businessSummary->slogan),

                    __('Industry','bidxplugin')
                        => $this->getMultiValues( $this->exst($businessSummary->industry), ', ', 'industry' ),

                    __('Country of business','bidxplugin')
                        => $this->getMultiValues( $this->exst($businessSummary->countryOperation), ', ', 'country' )
                );
                echo $this->addRowsWithLabelBelow('', '', $rowValues, $viewRowProperties );
?>
                        </div>

                        <!-- LOAD -->
                        <div class="view viewLoad">
                            <span><?php _e('Retrieving business summary information...','bidxplugin'); ?></span>
                        </div>

                        <!-- EDIT -->
                        <div class="view viewEdit">
                            <form id="frmBusinessSummary-GeneralOverview">

                                <!-- Name -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Business name','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <input type="text" name="name" placeholder="<?php _e('Business name','bidxplugin'); ?>">
                                    </div>
                                </div>

                                <!-- Slogan -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Describe your business in 15 words ( optional )','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <textarea type="text" name="slogan" placeholder="<?php _e('Please give a description of your business','bidxplugin'); ?>"></textarea>
                                    </div>
                                </div>

                                <!-- Industry -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Industry','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <div class="bidx-tagsinput-container">
                                            <input type="text" autocomplete="off" name="industry" class="bidx-tagsinput enclosed disabled" disabled data-bidxdatakey="industry" placeholder="<?php _e('Industry','bidxplugin'); ?>">
                                        </div>
                                    </div>
                                </div>

                                <!-- Country operation -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Country of business','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <div class="bidx-tagsinput-container">
                                            <input type="text" autocomplete="off" name="countryOperation" class="bidx-tagsinput enclosed disabled" disabled data-bidxdatakey="country" placeholder="<?php _e('Country of business','bidxplugin'); ?>">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div><!-- /General Overview -->

            <!-- About your business -->
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#businessSummaryAccordion" href="#businessSummaryAccordion-AboutYourBusiness"><?php _e('About the business','bidxplugin'); ?></a>
                </div>
                <div id="businessSummaryAccordion-AboutYourBusiness" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <!-- SHOW -->
                        <div class="view viewShow">
<?php
                $rowValues = array (
                    __('Summary of this business','bidxplugin')
                        => $this->exst($businessSummary->summary),

                    __('Reason for submission of business summary','bidxplugin')
                        => $this->exst($businessSummary->reasonForSubmission),

                    __('Social impact','bidxplugin')
                        => $this->getMultiValues( $this->exst($businessSummary->socialImpact), ', ', 'socialImpact' ),

                    __('Percentage equity you currently retain','bidxplugin')
                        => $this->exst($businessSummary->equityRetained),

                    __('Finance needed','bidxplugin')
                        => $this->exst($businessSummary->financingNeeded),

                    __('Reason for financing','bidxplugin')
                        => $this->exst($businessSummary->summaryFinancingNeeded)
                );
                echo $this->addRowsWithLabelBelow('', '', $rowValues, $viewRowProperties );
?>
                        </div>

                        <!-- LOAD -->
                        <div class="view viewLoad">
                            <span><?php _e('Retrieving business summary information...','bidxplugin'); ?></span>
                        </div>

                        <!-- EDIT -->
                        <div class="view viewEdit">
                            <form id="frmBusinessSummary-AboutYourBusiness">

                                <!-- Summary -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Summary of this business','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <textarea type="text" name="summary" placeholder="<?php _e('Summary','bidxplugin'); ?>"></textarea>
                                    </div>
                                </div>

                                <!-- Reason For Submission -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Reason for submission of business summary','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <textarea type="text" name="reasonForSubmission" placeholder="<?php _e('Please give the reason for submission','bidxplugin'); ?>"></textarea>
                                    </div>
                                </div>

                                <!-- Social impact -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Social impact','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <div class="bidx-tagsinput-container">
                                            <input type="text" autocomplete="off" name="socialImpact" class="bidx-tagsinput enclosed disabled" disabled data-bidxdatakey="socialImpact" placeholder="<?php _e('Social impact','bidxplugin'); ?>">
                                        </div>
                                    </div>
                                </div>

                                <!-- Equity Retained -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Percentage equity your currently retain ( optional )','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <input type="text" name="equityRetained" placeholder="<?php _e('Percentage','bidxplugin'); ?>">
                                    </div>
                                </div>

                                <!-- Finance Needed -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Finance needed','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <input type="text" name="financeNeeded" placeholder="<?php _e('Please give finance needed','bidxplugin'); ?>">
                                    </div>
                                </div>

                                <!-- Summary Financing Needed -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Why do you need financing? Describe in maximum 30 words ( optional )','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <textarea name="summaryFinancingNeeded" placeholder="<?php _e('Please give the reason you need financing','bidxplugin'); ?>"></textarea>
                                    </div>
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div><!-- /About your business -->

            <!-- About you & your team -->
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#businessSummaryAccordion" href="#businessSummaryAccordion-AboutYouAndYourTeam"><?php _e('About you & your team','bidxplugin'); ?></a>
                </div>
                <div id="businessSummaryAccordion-AboutYouAndYourTeam" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <!-- SHOW -->
                        <div class="view viewShow">
<?php
                $rowValues = array (
                    __('Role of entrepreneur in this business','bidxplugin')
                        => $this->exst($businessSummary->personalRole),

                    __('Expertise applicable to this business','bidxplugin')
                        => $this->exst($businessSummary->personalExpertise)
                );
                echo $this->addRowsWithLabelBelow('', '', $rowValues, $viewRowProperties );
?>
                        </div>

                        <!-- LOAD -->
                        <div class="view viewLoad">
                            <span><?php _e('Retrieving business summary information...','bidxplugin'); ?></span>
                        </div>

                        <!-- EDIT -->
                        <div class="view viewEdit">
                            <form id="frmBusinessSummary-AboutYouAndYourTeam">

                                <!-- Personal Role -->
                                <div class="control-group formfield">
                                    <label class="control-label"><?php _e('Role of entrepreneur in this business (5 words)','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <input type="text" name="personalRole" placeholder="<?php _e('Please give role of entrepreneur in this business','bidxplugin'); ?>">
                                    </div>
                                </div>

                                <!-- Personal Expertise -->
                                <div class="control-group">
                                    <label class="control-label"><?php _e('Please provide details of your expertise applicable to this business (30 words)','bidxplugin'); ?></label>
                                    <div class="controls">
                                        <textarea name="personalExpertise" placeholder="<?php _e('The details of your expertise for this business','bidxplugin'); ?>"></textarea>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div><!-- /About you & your team -->

            <!-- Financial details -->
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#businessSummaryAccordion" href="#businessSummaryAccordion-FinancialDetails">Financial Details</a>
                </div>
                <div id="businessSummaryAccordion-FinancialDetails" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <!-- SHOW -->
                        <div class="view viewShow">
                            show
                        </div>

                        <!-- LOAD -->
                        <div class="view viewLoad">
                            <span><?php _e('Retrieving business summary information...','bidxplugin'); ?></span>
                        </div>

                        <!-- EDIT -->
                        <div class="view viewEdit">
                            edit
                        </div>
                    </div>
                </div>
            </div><!-- /Financial details -->

            <!-- Company details -->
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#businessSummaryAccordion" href="#businessSummaryAccordion-CompanyDetails">Company Details</a>
                </div>
                <div id="businessSummaryAccordion-CompanyDetails" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <!-- SHOW -->
                        <div class="view viewShow">
                            show
                        </div>

                        <!-- LOAD -->
                        <div class="view viewLoad">
                            <span><?php _e('Retrieving business summary information...','bidxplugin'); ?></span>
                        </div>

                        <!-- EDIT -->
                        <div class="view viewEdit">
                            edit
                        </div>
                    </div>
                </div>
            </div><!-- /Company details -->

            <!-- Documents -->
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#businessSummaryAccordion" href="#businessSummaryAccordion-Documents">Documents</a>
                </div>
                <div id="businessSummaryAccordion-Documents" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <!-- SHOW -->
                        <div class="view viewShow">
                            show
                        </div>

                        <!-- LOAD -->
                        <div class="view viewLoad">
                            <span><?php _e('Retrieving business summary information...','bidxplugin'); ?></span>
                        </div>

                        <!-- EDIT -->
                        <div class="view viewEdit">
                            edit
                        </div>
                    </div>
                </div>
            </div><!-- /Documents -->

        </div><!-- /#businessSummaryAccordion -->

    </div><!-- /business summary content container -->

</div><!-- /businesssummary -->
